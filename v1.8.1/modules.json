{"menu":[{"text":"config","items":[{"text":"Config","as":"config/Config"},{"text":"default","as":"config/default"}]},{"text":"constants","items":[{"text":"ACTIONS","as":"constants/ACTIONS"},{"text":"XDN_CONFIG_ENV_VARIABLE","as":"constants/XDN_CONFIG_ENV_VARIABLE"},{"text":"XDN_CONFIG_FILE","as":"constants/XDN_CONFIG_FILE"},{"text":"XDN_DEPLOYMENT_TYPE_AWS","as":"constants/XDN_DEPLOYMENT_TYPE_AWS"},{"text":"XDN_DEPLOYMENT_TYPE_ENV_VARIABLE","as":"constants/XDN_DEPLOYMENT_TYPE_ENV_VARIABLE"}]},{"items":[{"text":"bundle","items":[{"text":"bundleXdnRouter","as":"deploy/bundle/bundleXdnRouter"}]},{"text":"DeploymentBuilder","as":"deploy/DeploymentBuilder"}],"text":"deploy"},{"text":"environment","items":[{"text":"isCloud","as":"environment/isCloud"},{"text":"isProductionBuild","as":"environment/isProductionBuild"}]},{"items":[{"text":"BackendFetchError","as":"errors/BackendFetchError"}],"text":"errors"},{"items":[{"text":"ensureServerStarted","as":"lambda/ensureServerStarted"},{"text":"gzipResponse","items":[{"text":"default","as":"lambda/gzipResponse/default"},{"text":"GZIP_TYPES","as":"lambda/gzipResponse/GZIP_TYPES"}]},{"text":"reqResMapper","items":[{"text":"logExecutionTime","as":"lambda/reqResMapper/logExecutionTime"},{"text":"Stream","as":"lambda/reqResMapper/Stream"}]}],"text":"lambda"},{"items":[{"text":"PluginBase","as":"plugins/PluginBase"}],"text":"plugins"},{"items":[{"text":"addPreloadHeaders","as":"response/addPreloadHeaders"},{"text":"EdgeResponseWriter","as":"response/EdgeResponseWriter"},{"text":"ResponseWriter","as":"response/ResponseWriter"},{"text":"stream","as":"response/stream"}],"text":"response"},{"items":[{"text":"createCustomCacheKey","as":"router/createCustomCacheKey"},{"text":"CustomCacheKey","as":"router/CustomCacheKey"},{"text":"loadRouter","as":"router/loadRouter"},{"text":"RouteGroup","as":"router/RouteGroup"},{"text":"RouteGroupList","as":"router/RouteGroupList"},{"text":"Router","as":"router/Router"}],"text":"router"},{"items":[{"text":"createDevServer","as":"server/createDevServer"}],"text":"server"},{"items":[{"text":"bindParamsToPath","as":"utils/bindParamsToPath"},{"text":"convertParamsToBackReferences","as":"utils/convertParamsToBackReferences"},{"text":"createEdgeConfig","items":[{"text":"default","as":"utils/createEdgeConfig/default"},{"text":"EdgeConfig","as":"utils/createEdgeConfig/EdgeConfig"},{"text":"getXdnVersion","as":"utils/createEdgeConfig/getXdnVersion"}]},{"text":"readBody","as":"utils/readBody"},{"text":"routeToRegex","as":"utils/routeToRegex"},{"text":"toEdgeRegex","as":"utils/toEdgeRegex"},{"text":"Validator","as":"utils/Validator"}],"text":"utils"}],"exports":{"config/Config":{"name":"Config","type":"class","async":false,"generator":false,"comments":"An object containing the config settings. This class is internal, but an instance\ncan be obtained using\n```js\nimport Config from '@xdn/core/config'\n```","examples":[],"params":[],"returns":[],"members":[{"name":"defaultTo","type":"function","async":false,"generator":false,"comments":"Sets a value for the specified key if one doesn't already exist","examples":[],"params":[{"name":"key","type":"String","text":"A config key"},{"name":"value","text":"Any value"}],"returns":[]},{"name":"get","type":"function","async":false,"generator":false,"comments":"Get configuration by key","examples":[],"params":[{"name":"key","type":"String","text":"The key to grab from the config."}],"returns":[]},{"name":"getRouter","type":"function","async":false,"generator":false,"comments":"Loads the router from the path indicated by the routes setting in xdn.config.js.","examples":[],"params":[],"returns":[{"type":"Router"}]},{"name":"has","type":"function","async":false,"generator":false,"comments":"Test if key exists in config","examples":[],"params":[{"name":"key","type":"String","text":"The key to test."}],"returns":[]},{"name":"loadXdnConfig","type":"function","async":false,"generator":false,"comments":"Loads XDN config and sets the current configuration.","examples":[],"params":[],"returns":[]}]},"config/default":{"name":"config","async":false,"generator":false,"comments":"Create an instance of [`Config`](/apiReference/config/Config) containing the XDN\nconfig settings.","examples":[],"params":[],"returns":[],"import":"import config from 'react-storefront/config'"},"constants/XDN_CONFIG_FILE":{"name":"XDN_CONFIG_FILE","type":"string","async":false,"generator":false,"comments":"XDN configuration file name.","examples":[],"params":[],"returns":[],"import":"import { XDN_CONFIG_FILE } from 'react-storefront/constants'"},"constants/XDN_CONFIG_ENV_VARIABLE":{"name":"XDN_CONFIG_ENV_VARIABLE","type":"string","async":false,"generator":false,"comments":"XDN configuration environment variable key.","examples":[],"params":[],"returns":[],"import":"import { XDN_CONFIG_ENV_VARIABLE } from 'react-storefront/constants'"},"constants/XDN_DEPLOYMENT_TYPE_ENV_VARIABLE":{"name":"XDN_DEPLOYMENT_TYPE_ENV_VARIABLE","type":"string","async":false,"generator":false,"comments":"Indicates whether code is running locally or in the cloud.","examples":[],"params":[],"returns":[],"import":"import { XDN_DEPLOYMENT_TYPE_ENV_VARIABLE } from 'react-storefront/constants'"},"constants/XDN_DEPLOYMENT_TYPE_AWS":{"name":"XDN_DEPLOYMENT_TYPE_AWS","type":"string","async":false,"generator":false,"comments":"Indicates that code is running in AWS.","examples":[],"params":[],"returns":[],"import":"import { XDN_DEPLOYMENT_TYPE_AWS } from 'react-storefront/constants'"},"constants/ACTIONS":{"name":"ACTIONS","type":"constant","async":false,"generator":false,"comments":"CDN-as-code configuration actions","examples":[],"params":[],"returns":[],"import":"import { ACTIONS } from 'react-storefront/constants'"},"constants/undefined":{"async":false,"generator":false,"comments":"The backend for cloud functions","examples":[],"params":[],"returns":[],"import":"import { undefined } from 'react-storefront/constants'"},"environment/isCloud":{"name":"isCloud","type":"function","async":false,"generator":false,"comments":"Used to determine if the app is running in the cloud.","examples":[],"params":[],"returns":[{"type":"Boolean","text":"`true` when running in the cloud, `false` otherwise"}],"import":"import { isCloud } from 'react-storefront/environment'"},"environment/isProductionBuild":{"name":"isProductionBuild","type":"function","async":false,"generator":false,"comments":"Used to determine if the app is running on a production build.","examples":[],"params":[],"returns":[{"type":"Boolean","text":"`true` when running a production build, either locally or in the cloud; `false` otherwise"}],"import":"import { isProductionBuild } from 'react-storefront/environment'"},"deploy/DeploymentBuilder":{"name":"DeploymentBuilder","async":false,"generator":false,"comments":"Creates the .xdn directory just prior to deploment with the XDN CLI.","examples":[],"params":[],"returns":[],"import":"import DeploymentBuilder from 'react-storefront/deploy/DeploymentBuilder'"},"deploy/bundle/bundleXdnRouter":{"name":"bundleXdnRouter","type":"function","async":false,"generator":false,"comments":"Bundles the project's `routes.js` file so it can be uploaded to Lambda.","examples":[],"params":[{"name":"appDir","type":"String","text":"Directory containing the application"},{"name":"destDir","type":"String","text":"Destination directory for the output bundle"},{"name":"filename","type":"String","text":"File name to use for the output bundle"}],"returns":[],"import":"import { bundleXdnRouter } from 'react-storefront/deploy/bundle'"},"errors/BackendFetchError":{"name":"BackendFetchError","type":"class","async":false,"generator":false,"comments":"To be thrown when failing to connect to a backend.","examples":[],"params":[{"name":"cause","type":"Error","text":"The root error emitted by http/https.request"}],"returns":[],"import":"import BackendFetchError from 'react-storefront/errors/BackendFetchError'","members":[]},"lambda/ensureServerStarted":{"name":"ensureServerStarted","type":"function","async":false,"generator":false,"comments":"Ensures that the specified server is listening on the port.  Resolves\nwhen the server is listening.","examples":[],"params":[{"name":"server","type":"HttpServer"},{"name":"port","type":"Number"}],"returns":[],"import":"import ensureServerStarted from 'react-storefront/lambda/ensureServerStarted'"},"lambda/gzipResponse/GZIP_TYPES":{"name":"GZIP_TYPES","type":"constant","async":false,"generator":false,"comments":"Those content types that will be gzipped are generated from the lists in:\nour XDN v1 production Nginx + XDN v1 production Varnish + default CDN gzip policy","examples":[],"params":[],"returns":[],"import":"import { GZIP_TYPES } from 'react-storefront/lambda/gzipResponse'"},"lambda/gzipResponse/default":{"name":"gzipResponse","type":"function","async":false,"generator":false,"comments":"Gzippes the response and sets the content-encoding header and returns the gzipped body when it matches the type defined above\nOtherwise it will return the provided body without any additional header set.","examples":[],"params":[{"name":"res","type":"HttpResponse","text":"HttpResponse object"},{"name":"response","type":"Response","text":"Lambda response object"}],"returns":[],"import":"import gzipResponse from 'react-storefront/lambda/gzipResponse'"},"lambda/reqResMapper/Stream":{"name":"Stream","type":"constant","async":false,"generator":false,"comments":"This file is modified version of: https://github.com/danielcondemarin/serverless-next.js/blob/master/packages/next-aws-lambda/lib/compatLayer.js\n\nMods:\n- getHeader were only able to read lower case headers, but it was able to set upper case headers as well with writeHead,\n  so all headers are converted to lowercase now.\n\n- Gzippes the response on response end if matches the content-type\n\n- Removed variable for base64 support since we always return base64 from the lambdas.","examples":[],"params":[],"returns":[],"import":"import { Stream } from 'react-storefront/lambda/reqResMapper'"},"lambda/reqResMapper/logExecutionTime":{"name":"logExecutionTime","type":"function","async":false,"generator":false,"comments":"Adds an `x-moov-t` header to the response based on the current time.","examples":[],"params":[{"name":"startTime","type":"Date","text":"The start time of the request"},{"name":"response","type":"Event","text":"The response event"}],"returns":[],"import":"import { logExecutionTime } from 'react-storefront/lambda/reqResMapper'"},"plugins/PluginBase":{"name":"PluginBase","type":"class","async":false,"generator":false,"comments":"Base class for a router plugin.","examples":[],"params":[],"returns":[],"import":"import PluginBase from 'react-storefront/plugins/PluginBase'","members":[{"name":"onRegister","type":"function","async":false,"generator":false,"comments":"Called when plugin is registered","examples":[],"params":[{"name":"router","type":"Router","text":"The router object to which the plugin was added."}],"returns":[]},{"name":"onRequest","type":"function","async":false,"generator":false,"comments":"Called when [`router.run`](/apiReference/Router#member-run) receives a request.","examples":[],"params":[{"name":"req","type":"Request","text":"The request object"}],"returns":[]}]},"response/EdgeResponseWriter":{"name":"EdgeResponseWriter","type":"class","async":false,"generator":false,"comments":"A substitute implementation of `ResponseWriter` that creates the contents of `xdn.json`, which\nis used to generate edge code.","examples":[],"params":[{"name":"req","type":"Request","text":"The `HttpRequest` object"},{"name":"res","type":"Response","text":"The `HttpResponse` object"},{"name":"route","type":"Route","text":"The route being hit"},{"name":"defaultBackend","type":"String","text":"The default backend for proxy when none is provided"}],"returns":[],"import":"import EdgeResponseWriter from 'react-storefront/response/EdgeResponseWriter'","members":[{"name":"cache","type":"function","async":false,"generator":false,"comments":"Creates the edge cache config","examples":[],"params":[{"name":"config","type":"Object"}],"returns":[]},{"name":"proxy","type":"function","async":false,"generator":false,"comments":"Proxies from the edge","examples":[],"params":[{"name":"backend","type":"String"},{"name":"config","default":"{}","type":"Object","properties":[{"name":"path","type":"String"}]}],"returns":[]},{"name":"redirect","type":"function","async":false,"generator":false,"comments":"Sends a redirect from the edge","examples":[],"params":[{"name":"to","type":"String","text":"The destination URL"},{"name":"statusCode","default":"302","type":"Number","text":"The http response status."}],"returns":[]},{"name":"render","type":"member","async":false,"generator":false,"comments":"Passes request and response to the specified callback, which should\nhandle rendering the response as a string","examples":[],"params":[],"returns":[]},{"name":"send","type":"function","async":false,"generator":false,"comments":"Sends string content back to client","examples":[],"params":[{"name":"content","type":"String"},{"name":"statusCode","default":"200","type":"Number"}],"returns":[]},{"name":"serveStatic","type":"function","async":false,"generator":false,"comments":"Serve static","examples":[],"params":[{"name":"path","type":"String","text":"The request path"}],"returns":[]}]},"response/ResponseWriter":{"name":"ResponseWriter","type":"class","async":false,"generator":false,"comments":"The API that is passed to route callbacks.","examples":[],"params":[{"name":"req","type":"HttpRequest","text":"The request"},{"name":"res","type":"HttpResponse","text":"The response"},{"name":"route","type":"Route","text":"The route"},{"name":"defaultBackend","type":"String","text":"The default backend for proxy when none is provided"}],"returns":[],"import":"import ResponseWriter from 'react-storefront/response/ResponseWriter'","members":[{"name":"cache","type":"function","async":false,"generator":false,"comments":"Provides cache keys for http response","examples":[],"params":[{"name":"$0","type":"Object","properties":[{"name":"browser"},{"name":"edge"}]}],"returns":[]},{"name":"onRouteError","type":"function","async":false,"generator":false,"comments":"Send json error response to client","examples":[],"params":[{"name":"err","type":"Error"}],"returns":[]},{"name":"proxy","type":"function","async":false,"generator":false,"comments":"Proxy current request","examples":[],"params":[{"name":"backend","type":"String","text":"The name of the backend to connect to"},{"name":"options","type":"Object","text":"Options for proxyHost"}],"returns":[]},{"name":"redirect","type":"function","async":false,"generator":false,"comments":"Send redirect response","examples":[],"params":[{"name":"to","type":"String"},{"name":"statusCode","default":"302","type":"Number"}],"returns":[]},{"name":"removeRequestHeader","type":"function","async":false,"generator":false,"comments":"Remove request header","examples":[],"params":[{"name":"name","type":"String"}],"returns":[]},{"name":"removeResponseHeader","type":"function","async":false,"generator":false,"comments":"Remove header","examples":[],"params":[{"name":"name","type":"String"}],"returns":[]},{"name":"render","type":"function","async":false,"generator":false,"comments":"Call render callback","examples":[],"params":[{"name":"cb","type":"Function","text":"Render callback function"}],"returns":[]},{"name":"send","type":"function","async":false,"generator":false,"comments":"Sends content back to client","examples":[],"params":[{"name":"content","type":"String"},{"name":"statusCode","default":"200","type":"Number"}],"returns":[]},{"name":"serveStatic","type":"function","async":false,"generator":false,"comments":"Responds with a static asset from the specified path\n\nExample:\n\n```js\nserveStatic('path/to/asset/from/app/root')\n```","examples":[],"params":[{"name":"path","type":"String","text":"The relative path to the asset from the app's root directory."}],"returns":[]},{"name":"setRequestHeader","type":"function","async":false,"generator":false,"comments":"Sets request header","examples":[],"params":[{"name":"name","type":"String","text":"header key"},{"name":"value","type":"String","text":"header value"}],"returns":[]},{"name":"setResponseHeader","type":"function","async":false,"generator":false,"comments":"Set response headers","examples":[],"params":[{"name":"name","type":"String"},{"name":"value","type":"String"}],"returns":[]},{"name":"updateRequestHeader","type":"function","async":false,"generator":false,"comments":"Sets request header","examples":[],"params":[{"name":"name","type":"String","text":"header key"},{"name":"match"},{"name":"replace"},{"name":"value","type":"String","text":"header value"}],"returns":[]},{"name":"updateResponseHeader","type":"function","async":false,"generator":false,"comments":"Updates response header","examples":[],"params":[{"name":"name","type":"String","text":"Header name"},{"name":"match","type":"String","text":"Regex to match the part"},{"name":"replace","type":"String","text":"Value to update matched part with"}],"returns":[]}]},"response/addPreloadHeaders":{"name":"addPreloadHeaders","type":"function","async":false,"generator":false,"comments":"Adds preload headers for all `<link rel=\"preload\">` tags on the response.body","examples":[],"params":[{"name":"res","type":"Response","text":"The response to which headers should be added."}],"returns":[],"import":"import addPreloadHeaders from 'react-storefront/response/addPreloadHeaders'"},"response/stream":{"name":"stream","type":"function","async":false,"generator":false,"comments":"Proxies the request to the specified backend as a stream.  This can be used for event streams\nfor hot module reloading.","examples":[],"params":[{"name":"req","type":"Request","text":"The downstream request"},{"name":"res","type":"Response","text":"The downstream response"},{"name":"backendConfig","type":"Object","text":"The backend config from `xdn.config.js`"},{"name":"errorHandler","default":"Function.prototype","type":"Function","text":"A function to call when an error occurs"}],"returns":[],"import":"import stream from 'react-storefront/response/stream'"},"router/CustomCacheKey":{"name":"CustomCacheKey","type":"class","async":false,"generator":false,"comments":"Representation of a custom cache key. Do not instantiate this class directly.\ninstantiated using [`createCustomCacheKey`](/apiReference/createCustomCacheKey/default).\n```js\nimport createCustomCacheKey from '@xdn/core/createCustomCacheKey'\n```","examples":[],"params":[],"returns":[],"members":[{"name":"addCookie","type":"function","async":false,"generator":false,"comments":"Adds a cookie to the cache key.","examples":[],"params":[{"name":"name","type":"String","text":"The name of the cookie"},{"name":"createGroups","type":"Function","text":"An function that accepts a `Groups` instance and calls `groups.group(name)` to group multiple values into a single cache key component"}],"returns":[{"type":"CustomCacheKey","text":"A self-reference, suitable for chaining."}]},{"name":"addHeader","type":"function","async":false,"generator":false,"comments":"Adds a request header to the cache key.","examples":[],"params":[{"name":"name","type":"String","text":"The name of the request header"},{"name":"createGroups","type":"Function","text":"An function that accepts a `Groups` instance and calls `groups.group(name)` to group multiple values into a single cache key component"}],"returns":[{"type":"CustomCacheKey","text":"A self-reference, suitable for chaining."}]},{"name":"excludeAllQueryParameters","type":"function","async":false,"generator":false,"comments":"Excludes the entire query string from the cache key.","examples":[],"params":[],"returns":[{"type":"CustomCacheKey","text":"A self-reference, suitable for chaining."}]},{"name":"excludeAllQueryParametersExcept","type":"function","async":false,"generator":false,"comments":"Excludes all query parameters except those provided from the cache key.  We also refer to\nthis as \"whitelisting\" query parameters.  We recommend using this method over `excludeQueryParameters`\nas it's difficult to know all of the query parameters your application might receive and unexpected\nquery parameters can lead to significantly lower cache hit rates.","examples":[],"params":[{"name":"names","type":"String","text":"The names of the query parameters to whitelist"}],"returns":[{"type":"CustomCacheKey","text":"A self-reference, suitable for chaining."}]},{"name":"excludeQueryParameters","type":"function","async":false,"generator":false,"comments":"Excludes the provided query parameters from the cache key.  All other parameters\nwill still be part of the cache key. We also refer to this as \"blacklisting\" query parameters.","examples":[],"params":[{"name":"names","type":"String","text":"The names of the query parameters to blacklist"}],"returns":[{"type":"CustomCacheKey","text":"A self-reference, suitable for chaining."}]}]},"router/RouteGroup":{"name":"RouteGroup","type":"class","async":false,"generator":false,"comments":"This class is needed for creating a route group that holds a routes that can\nbe dynamically updated on a local env.","examples":[],"params":[{"name":"name","type":"String","text":"Name of the route group - **required**"}],"returns":[],"import":"import RouteGroup from 'react-storefront/router/RouteGroup'","members":[{"name":"clear","type":"function","async":false,"generator":false,"comments":"Clears all routes in group.\nUsed for updating routes dynamically for development purpose.","examples":[],"params":[],"returns":[]},{"name":"length","type":"function","async":false,"generator":false,"comments":"Returns number of routes in group.","examples":[],"params":[],"returns":[{"type":"Number","text":"Number of routes in the group."}]},{"name":"match","type":"function","async":false,"generator":false,"comments":"Adds route to group.","examples":[],"params":[{"name":"criteria","type":"Object|String","text":"The criteria to match."},{"name":"handler","type":"Function","text":"The handler to use for the route."}],"returns":[]}]},"router/RouteGroupList":{"name":"RouteGroupList","type":"class","async":false,"generator":false,"comments":"Holds a list of route groups\nThis class is needed for querying route groups that is needed\nfor keeping the routes hierarchy while changing the routes in a group.\nFor example, updating next.js routes in local dev env.","examples":[],"params":[],"returns":[],"import":"import RouteGroupList from 'react-storefront/router/RouteGroupList'","members":[{"name":"add","type":"function","async":false,"generator":false,"comments":"Pushes route group to list.","examples":[],"params":[{"name":"group","type":"RouteGroup","text":"The route group."}],"returns":[{"type":"RouteGroupList","text":"A self-reference suitable for chaining."}]},{"name":"findByName","type":"function","async":false,"generator":false,"comments":"Returns route group by name.","examples":[],"params":[{"name":"name","type":"String","text":"The name of the route group to find."}],"returns":[{"type":"RouteGroup","text":"The route group with the given name, or `null` if not found."}]},{"name":"getGroups","type":"function","async":false,"generator":false,"comments":"Returns all route groups.","examples":[],"params":[],"returns":[{"type":"RouteGroup","extendedType":"Array","text":"A list of all the route groups."}]},{"name":"getRoutes","type":"function","async":false,"generator":false,"comments":"Returns all registered routes in all groups.","examples":[],"params":[],"returns":[{"type":"Route","extendedType":"Array","text":"List of registered routes."}]},{"name":"length","type":"function","async":false,"generator":false,"comments":"Returns the length of route groups list.","examples":[],"params":[],"returns":[{"type":"Number","text":"The number of route groups in the list."}]}]},"router/Router":{"name":"Router","type":"class","async":false,"generator":false,"comments":"A router.","examples":[],"params":[],"returns":[],"import":"import Router from 'react-storefront/router/Router'","members":[{"name":"createEdgeConfig","type":"function","async":false,"generator":false,"comments":"Returns edge config from current router","examples":[],"params":[],"returns":[]},{"name":"destination","type":"function","async":false,"generator":false,"comments":"Adds a named destination to which you can map traffic using the traffic shaping settings in your environment\nin the XDN developer console","examples":[],"params":[{"name":"name","type":"String","text":"The name of the destination"},{"name":"router","type":"Router","text":"A router to use when handling requests"}],"returns":[{"type":"Router","text":"A self-reference, suitable for chaining."}]},{"name":"fallback","type":"function","async":false,"generator":false,"comments":"Adds a route that matches all requests","examples":[],"params":[{"name":"handler","type":"Function","text":"A function that accepts a `WrappedResponse`, `Request`, and `params` object."}],"returns":[{"type":"Router","text":"A self-reference, suitable for chaining."}]},{"name":"group","type":"function","async":false,"generator":false,"comments":"Adds a [`RouteGroup`](/apiReference/RouteGroup) to router and calls route register\nfunction for group.","examples":[],"params":[{"name":"name","type":"String","text":"Group name"},{"name":"registerRoutesFn","type":"Function","text":"Group route register function"}],"returns":[{"type":"Router","text":"A self-reference, suitable for chaining."}]},{"name":"match","type":"function","async":false,"generator":false,"comments":"Adds a route.","examples":[],"params":[{"name":"criteria","type":"String|Object","text":"Either the path as a string or an object with `path`, `method`, and `headers`."},{"name":"handler","type":"Function","text":"A function that accepts a `WrappedResponse`, `Request`, and `params` object."}],"returns":[{"type":"Router","text":"A self-reference, suitable for chaining."}]},{"name":"run","type":"function","async":false,"generator":false,"comments":"Finds the matched route and calls its handler","examples":[],"params":[{"name":"req","type":"Request","text":"The request"},{"name":"res","type":"Response","text":"The response"}],"returns":[]},{"name":"setDefaultBackend","type":"function","async":false,"generator":false,"comments":"Sets the default backend to use when `proxy` is used without an argument","examples":[],"params":[{"name":"backend","type":"String"}],"returns":[]},{"name":"setIndex","type":"function","async":false,"generator":false,"comments":"Sets the index at which the router has been added to its parent router","examples":[],"params":[{"name":"index","type":"Number"}],"returns":[]},{"name":"use","type":"function","async":false,"generator":false,"comments":"Constructs plugin and pushes it to registered plugins","examples":[],"params":[{"name":"pluginInstance","type":"Class","text":"A plugin to use."}],"returns":[{"type":"Router","text":"A self-reference, suitable for chaining."}]}]},"router/createCustomCacheKey":{"name":"createCustomCacheKey","type":"function","async":false,"generator":false,"comments":"Returns a DSL for creating custom server cache keys based on cookies, query parameters, and\nrequest headers.\n\nexample:\n\n```js\n new Router()\n   .get('/s/:id',\n     cache({\n       edge: {\n         key: createCustomCacheKey()\n           .addHeader('user-agent')\n           .excludeQueryParameters(['uid'])\n           .addCookie('location', cookie => {\n             cookie.group('na').byPattern('us|ca')\n             cookie.group('eur').byPattern('de|fr|ee')\n           })\n       }\n     })\n   )\n```","examples":[],"params":[],"returns":[{"type":"CustomCacheKey"}],"import":"import createCustomCacheKey from 'react-storefront/router/createCustomCacheKey'"},"router/loadRouter":{"name":"loadRouter","type":"function","async":false,"generator":false,"comments":"Loads and returns the router from the specified path.  This function\ncan accomodate a routes file that uses `module.exports` or `export default`.\nThe routes file can either export an instance of Router or a function that\nreturns an instance of Router.","examples":[],"params":[{"name":"routerPath","type":"String","text":"The path to routes.js"}],"returns":[{"type":"Router","text":"The Router instance"}],"import":"import loadRouter from 'react-storefront/router/loadRouter'"},"server/createDevServer":{"name":"createDevServer","type":"function","async":false,"generator":false,"comments":"Creates a local development server to simulate the XDN","examples":[],"params":[{"name":"router","type":"Router","text":"Your router"},{"name":"server"},{"name":"port","default":"parseInt(process.env.PORT,10)||3000","type":"Number","text":"The port on which to run the server.  Defaults to 3000.  The next two ports will also be taken by the JS backand and assets backend, respectively"},{"name":"jsBackendCallback","type":"Function","text":"A node http.Server callback that accepts request and response"}],"returns":[{"type":"Promise","text":"A promise that resolves when all servers are listening"}],"import":"import createDevServer from 'react-storefront/server/createDevServer'"},"utils/Validator":{"name":"Validator","type":"class","async":false,"generator":false,"comments":"An object used to validate an xdn config.\n\nExample:\n```js\nValidator.validateXdnFileConfiguration(config)\n```","examples":[],"params":[],"returns":[],"import":"import Validator from 'react-storefront/utils/Validator'","members":[{"name":"static validateXdnFileConfiguration","type":"function","async":false,"generator":false,"comments":"Validates `xdn.config.js`. If the config is validated, it is returned; otherwise,\nan error is thrown.","examples":[],"params":[{"name":"config","type":"EdgeConfig","text":"Loaded xdn configuration"}],"returns":[{"type":"EdgeConfig","text":"The validated config"}],"import":"import { static validateXdnFileConfiguration } from 'react-storefront/undefined'"}]},"utils/bindParamsToPath":{"name":"bindParamsToPath","type":"function","async":false,"generator":false,"comments":"Binds params to path.\n\nExample:\n```js\nbindParamsToPath('/{param1}/{param2}', { param1: 'p1', param2: 'p2' })\n```\nOutput: `/p1/p2`","examples":[],"params":[{"name":"path","type":"String","text":"The path, with param substitutions in braces `{}`."},{"name":"params","type":"Object","text":"An object with keys matching the params in braces."}],"returns":[{"type":"String","text":"A string with the params substituted with their values."}],"import":"import bindParamsToPath from 'react-storefront/utils/bindParamsToPath'"},"utils/convertParamsToBackReferences":{"name":"convertParamsToBackReferences","type":"function","async":false,"generator":false,"comments":"Replaces named parameters in the specified path with back references so\nthat the edge can create a path using the matched params with a regex replace in VCL.","examples":[],"params":[{"name":"matcher","type":"Route","text":"A route-parser route"},{"name":"path","type":"String","text":"The request path"}],"returns":[{"type":"String","text":"A path with params replaced by back references"}],"import":"import convertParamsToBackReferences from 'react-storefront/utils/convertParamsToBackReferences'"},"utils/createEdgeConfig/EdgeConfig":{"name":"EdgeConfig","type":"class","async":false,"generator":false,"comments":"A configuration object for the Edge. Can be instantiated using\n[`createEdgeConfig`](/apiReference/utils/createEdgeConfig/default).\n```js\nimport createEdgeConfig from '@xdn/core/utils/createEdgeConfig'\n```","examples":[],"params":[],"returns":[],"members":[{"name":"backends","type":"Object","async":false,"generator":false,"comments":"A map of backends.","examples":[],"params":[],"returns":[]},{"name":"destinations","type":"Object","async":false,"generator":false,"comments":"A map of route paths to destination routes.","examples":[],"params":[],"returns":[]}]},"utils/createEdgeConfig/default":{"name":"createEdgeConfig","type":"function","async":false,"generator":false,"comments":"Creates an outer edge manager config ([`EdgeConfig`](/apiReference/utils/createEdgeConfig/EdgeConfig))\nfor the specified router by iterating through each route and calling it with a mock request\nand response.","examples":[],"params":[{"name":"router","type":"Router"}],"returns":[{"type":"EdgeConfig","text":"An object containing the Edge config"}],"import":"import createEdgeConfig from 'react-storefront/utils/createEdgeConfig'"},"utils/createEdgeConfig/getXdnVersion":{"name":"getXdnVersion","type":"function","async":false,"generator":false,"comments":"Gets the version of @xdn/core.  For this to work in testing an entry needed\nto be added to moduleNameMapper in the jest config specifically for package.json","examples":[],"params":[],"returns":[{"type":"String"}],"import":"import { getXdnVersion } from 'react-storefront/utils/createEdgeConfig'"},"utils/readBody":{"name":"readBody","type":"function","async":false,"generator":false,"comments":"Reads the request body and adds it to `request.body`.","examples":[],"params":[{"name":"req","type":"ClientRequest","text":"The request"}],"returns":[{"type":"Promise","text":"The streamable request Promise"}],"import":"import readBody from 'react-storefront/utils/readBody'"},"utils/routeToRegex":{"name":"routeToRegex","type":"function","async":false,"generator":false,"comments":"Returns a regex version of a route.","examples":[],"params":[{"name":"route","type":"String","text":"The route."}],"returns":[{"type":"String","text":"A regex representation of the route."}],"import":"import routeToRegex from 'react-storefront/utils/routeToRegex'"},"utils/toEdgeRegex":{"name":"toEdgeRegex","type":"function","async":false,"generator":false,"comments":"Converts a JavaScript Regexp instance to a string compatible with edge.","examples":[],"params":[{"name":"regex","text":"The regex to convert."}],"returns":[{"type":"String","text":"A string representing the given regex that is compatible with edge."}],"import":"import toEdgeRegex from 'react-storefront/utils/toEdgeRegex'"}}}
